<div class="plans-container">
  <div class="page-header">
    <h1>Il Piano Perfetto per Te</h1>
    <p>Inizia gratuitamente e passa a Premium quando vuoi per sbloccare tutte le funzionalit√†.</p>
  </div>

  <div class="billing-toggle">
    <span>Mensile</span>
    <label class="switch">
      <input type="checkbox" [(ngModel)]="isYearly">
      <span class="slider"></span>
    </label>
    <span>Annuale <span class="savings-badge">Risparmia 16%</span></span>
  </div>

  <div class="plans-grid">
    
    <div class="plan-card">
      <div class="plan-card-header">
        <h2>Gratuito</h2>
        <p class="price">‚Ç¨0<span>/sempre</span></p>
        <p class="description">Le funzioni essenziali per iniziare a proteggerti subito.</p>
      </div>
      <ul class="features-list">
        <li><fa-icon [icon]="faUserCircle"></fa-icon> 1 Profilo Medico</li>
        <li><fa-icon [icon]="faHelmetSafety"></fa-icon> 1 Casco / Tag NFC</li>
        <li><fa-icon [icon]="faUserEdit"></fa-icon> Fino a 3 Contatti (per profilo)</li>
        <li class="disabled"><span class="icon-wrapper fa-times"><fa-icon [icon]="faTimes"></fa-icon></span> Associazione Multi-Profilo</li>
        <li class="disabled"><span class="icon-wrapper fa-times"><fa-icon [icon]="faTimes"></fa-icon></span> Notifiche SMS e Email</li>
      </ul>
      <div class="plan-card-footer">
        
        @if (auth.isLogged) {
          @if (auth.user?.premium) {
            @if (auth.user?.premiumExpiresAt) {
              <div class="plan-status">
                <span>Il Tuo Piano Scade il:</span>
                <strong>{{ auth.user?.premiumExpiresAt | date:'dd/MM/yyyy' }}</strong>
              </div>
            } @else {
              <div class="plan-status lifetime">
                <fa-icon [icon]="faCrown"></fa-icon> A VITA
              </div>
            }
          } @else {
            <span class="btn-current">Il Tuo Piano Attuale</span>
          }
        } @else {
          <a routerLink="/buy-kit" class="btn-primary">Acquista il Kit S.O.S. Helmet</a>
        }

      </div>
    </div>

    <div class="plan-card premium">
      <div class="badge">Pi√π Scelto</div>
      <div class="plan-card-header">
        <h2>Premium</h2>

        @if (isYearly) {
          <p class="price">‚Ç¨19.99<span>/anno</span></p>
        } @else {
          <p class="price">‚Ç¨1.99<span>/mese</span></p>
        }
        
        <p class="description">Massima sicurezza e flessibilit√† per te e i tuoi cari.</p>
      </div>
      <ul class="features-list">
        <li><span class="icon-wrapper fa-star"><fa-icon [icon]="faStar"></fa-icon></span> <strong>Tutto dal piano Gratuito, e in pi√π:</strong></li>
        <li><span class="icon-wrapper fa-check"><fa-icon [icon]="faCheck"></fa-icon></span> Fino a 10 Profili Medici</li>
        <li><span class="icon-wrapper fa-check"><fa-icon [icon]="faCheck"></fa-icon></span> Fino a 10 Caschi / Tag NFC</li>
        <li><span class="icon-wrapper fa-check"><fa-icon [icon]="faCheck"></fa-icon></span> Fino a 10 Contatti (per profilo)</li>
        <li><span class="icon-wrapper fa-check"><fa-icon [icon]="faCheck"></fa-icon></span> Associazione Multi-Profilo (Switch)</li>
        <li><span class="icon-wrapper fa-check"><fa-icon [icon]="faCheck"></fa-icon></span> Accesso a tutte le funzioni della Roadmap</li>
      </ul>
      <div class="plan-card-footer">
        
        @if (auth.user?.premium && !auth.user?.premiumExpiresAt) {
          <div class="plan-status lifetime">
            PER UN AMICO<fa-icon [icon]="faCrown"></fa-icon>
          </div>
        } @else {
          <a routerLink="/account-settings" class="btn-primary">Attiva o Rinnova Premium</a>
        }

      </div>
    </div>
  </div>

  <div class="roadmap-section">
    <div class="page-header">
        <h1>Roadmap del Progetto üöÄ</h1>
        <p>Siamo costantemente al lavoro per migliorare S.O.S. Helmet. Ecco cosa bolle in pentola.</p>
    </div>

    <div class="roadmap-list">
        <div class="roadmap-step">
            <div class="roadmap-icon"><fa-icon [icon]="faCameraRetro"></fa-icon></div>
            <div class="roadmap-content">
                <div class="status-badge development">In Sviluppo</div>
                <h3>Foto Veicolo e Casco</h3>
                <p>Carica una foto della tua moto e del tuo casco per un'identificazione inequivocabile da parte dei soccorritori.</p>
            </div>
        </div>
        <div class="roadmap-step">
            <div class="roadmap-icon"><fa-icon [icon]="faCommentMedical"></fa-icon></div>
            <div class="roadmap-content">
                <div class="status-badge planned">Pianificato</div>
                <h3>Pulsante Allerta Soccorritore</h3>
                <p>Un pulsante sulla scheda medica per inviare un SMS di notifica immediato ai contatti d'emergenza.</p>
            </div>
        </div>
        <div class="roadmap-step">
            <div class="roadmap-icon"><fa-icon [icon]="faSms"></fa-icon></div>
            <div class="roadmap-content">
                <div class="status-badge planned">Pianificato</div>
                <h3>Notifica Scansione via SMS</h3>
                <p>Ricevi un SMS ogni volta che un tuo casco viene scansionato, con un link alla posizione approssimativa.</p>
            </div>
        </div>
    </div>
  </div>

</div>